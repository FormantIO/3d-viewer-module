{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Scene",
  "type": "object",
  "required": ["maps"],
  "properties": {
    "maps": {
      "title": "Maps",
      "type": "array",
      "items": {
        "$formant.itemName": "maps",
        "type": "object",
        "properties": {
          "mapType": {
            "title": "Map type",
            "type": "string",
            "description": "Select the type of map you want to visualize.",
            "enum": ["Ground plane", "GPS", "Occupancy"]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "$formant.visible.when": ["mapType", "!=", ""]
          },
          "gpsMapType": {
            "title": "World map type",
            "type": "string",
            "enum": ["Satellite", "Street", "Satellite street"],
            "default": "Satellite",
            "$formant.visible.when": ["mapType", "=", "GPS"]
          },
          "gpsMapSize": {
            "title": "Map edge length",
            "description": "Select the size of your map. Larger map boundaries take longer to render and update.",
            "type": "string",
            "default": "200m",
            "enum": ["200m", "400m", "600m", "800m", "1000m"],
            "$formant.visible.when": ["mapType", "=", "GPS"]
          },
          "gpsMapLatitude": {
            "title": "Default latitude (optional)",
            "type": "number",
            "$formant.placeholder": "Edit (e.g 37.7749)",
            "$formant.visible.when": ["mapType", "=", "GPS"]
          },
          "gpsMapLongitude": {
            "title": "Default longitude (optional)",
            "type": "number",
            "$formant.placeholder": "Edit (e.g 122.4194)",
            "$formant.visible.when": ["mapType", "=", "GPS"]
          },
          "telemetryStreamName": {
            "title": "Telemetry stream",
            "type": "string",
            "description": "Provide a GPS telemetry stream. If you specify a latitude and longitude, that location will become the origin of your visualization and override the stream.",
            "$formant.streams.byType": "json,location,localization",
            "$formant.visible.when": [
              "or",
              ["mapType", "=", "GPS"],
              ["mapType", "=", "Occupancy"]
            ]
          },
          "telemetryLatestDataPoint": {
            "title": "Use historical data",
            "type": "boolean",
            "default": false,
            "description": "Enable to use latest data point in the last year, or the most recent data point within the last 15 seconds",
            "$formant.visible.when": [
              "and",
              ["or", ["mapType", "=", "GPS"], ["mapType", "=", "Occupancy"]],
              ["telemetryStreamName", "!=", ""]
            ]
          },
          "transformX": {
            "title": "X offset (m)",
            "type": "number",
            "$formant.visible.when": ["mapType", "!=", ""]
          },
          "transformY": {
            "title": "Y offset (m)",
            "type": "number",
            "$formant.visible.when": ["mapType", "!=", ""]
          },
          "transformZ": {
            "title": "Z offset (m)",
            "type": "number",
            "$formant.visible.when": ["mapType", "!=", ""]
          }
        },
        "required": ["mapType"]
      }
    },
    "visualizations": {
      "title": "Device Layers",
      "type": "array",
      "items": {
        "type": "object",
        "$formant.itemName": "Device Layers",
        "properties": {
          "visualizationType": {
            "title": "Type",
            "type": "string",
            "enum": [
              "Position indicator",
              "Geometry",
              "Point cloud",
              "Path",
              "Image",
              "GLTF"
            ]
          },
          "positionIndicatorUseURDF": {
            "type": "boolean",
            "title": "Use URDF",
            "default": false,
            "description": "URDF is set in Device Configuration. To add a URDF file, click on the three dots (meatball menu) and go to Configure device >> Add URDF.",
            "$formant.visible.when": [
              "and",
              ["visualizationType", "=", "Position indicator"]
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "$formant.visible.when": ["visualizationType", "!=", ""]
          },

          "imageFileId": {
            "type": "string",
            "title": "Image file ID",
            "$formant.visible.when": ["visualizationType", "=", "Image"]
          },
          "imageWidth": {
            "type": "number",
            "title": "Image width (meters)",
            "$formant.visible.when": ["visualizationType", "=", "Image"],
            "default": 1
          },
          "gltfFileId": {
            "type": "string",
            "title": "GLTF file ID",
            "$formant.visible.when": ["visualizationType", "=", "GLTF"]
          },
          "gltfScale": {
            "type": "number",
            "title": "GLTF Scale",
            "$formant.visible.when": ["visualizationType", "=", "GLTF"],
            "default": 1
          },
          "imageHeight": {
            "type": "number",
            "title": "Image height (meters)",
            "$formant.visible.when": ["visualizationType", "=", "Image"],
            "default": 1
          },
          "pointCloudDecayTime": {
            "title": "Decay time (s)",
            "$formant.placeholder": "e.g 2",
            "type": "number",
            "$formant.visible.when": ["visualizationType", "=", "Point cloud"]
          },
          "pointCloudUseColors": {
            "title": "Full Color",
            "type": "boolean",
            "$formant.visible.when": ["visualizationType", "=", "Point cloud"]
          },
          "telemetryStreamName": {
            "title": "Telemetry stream",
            "type": "string",
            "$formant.streams.byType": "json,localization",
            "$formant.visible.when": [
              "or",
              ["visualizationType", "=", "Point cloud"],
              ["visualizationType", "=", "Path"],
              ["visualizationType", "=", "Geometry"]
            ]
          },
          "telemetryLatestDataPoint": {
            "title": "Use historical data",
            "type": "boolean",
            "default": false,
            "description": "Enable to use latest data point in the last year, or the most recent data point within the last 15 seconds",
            "$formant.visible.when": [
              "and",
              [
                "or",
                ["visualizationType", "=", "Point cloud"],
                ["visualizationType", "=", "Path"],
                ["visualizationType", "=", "Geometry"]
              ],
              ["telemetryStreamName", "!=", ""]
            ]
          },
          "transformType": {
            "title": "Transform type (optional)",
            "type": "string",
            "enum": ["Cartesian", "Gps", "Odometry", "Transform Tree"],
            "$formant.visible.when": ["visualizationType", "!=", ""]
          },
          "transformX": {
            "title": "X offset (m)",
            "type": "number",
            "$formant.visible.when": ["transformType", "=", "Cartesian"]
          },
          "transformY": {
            "title": "Y offset (m)",
            "type": "number",
            "$formant.visible.when": ["transformType", "=", "Cartesian"]
          },
          "transformZ": {
            "title": "Z offset (m)",
            "type": "number",
            "$formant.visible.when": ["transformType", "=", "Cartesian"]
          },
          "transformRelativeLatitude": {
            "title": "Relative latitude",
            "type": "number",
            "$formant.visible.when": ["transformType", "=", "Gps"]
          },
          "transformRelativeLongitude": {
            "title": "Relative longitude",
            "type": "number",
            "$formant.visible.when": ["transformType", "=", "Gps"]
          },
          "transformGpsStream": {
            "title": "GPS stream",
            "type": "string",
            "$formant.streams.byType": "location",
            "$formant.visible.when": ["transformType", "=", "Gps"]
          },
          "transformLocalizationStream": {
            "title": "Localization stream",
            "type": "string",
            "$formant.streams.byType": "localization",
            "$formant.visible.when": ["transformType", "=", "Odometry"]
          },
          "transformLocalizationLatestDataPoint": {
            "title": "Use historical data",
            "type": "boolean",
            "default": false,
            "description": "Enable to use latest data point in the last year, or the most recent data point within the last 15 seconds",
            "$formant.visible.when": [
              "and",
              ["transformType", "=", "Odometry"],
              ["transformLocalizationStream", "!=", ""]
            ]
          },
          "transformLocalizationWorldToLocal": {
            "title": "Localization world to local",
            "type": "boolean",
            "default": true,
            "$formant.visible.when": ["transformType", "=", "Odometry"]
          },
          "transformLocalizationRealtimeStream": {
            "title": "Localization realtime stream",
            "type": "string",
            "$formant.visible.when": ["transformType", "=", "Odometry"]
          },
          "transformTreeStream": {
            "type": "string",
            "$formant.streams.byType": "transform tree",
            "$formant.visible.when": ["transformType", "=", "Transform tree"]
          },
          "transformTreeEndPoint": {
            "type": "string",
            "$formant.visible.when": ["transformType", "=", "Transform tree"]
          }
        },
        "required": ["visualizationType"]
      }
    }
  }
}
